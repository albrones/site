---
import { Button, Card } from '@eliancodes/brutal-ui';
import Layout from '@layouts/Default.astro';
---

<Layout
  title="Flappy Dino"
  description="Play Flappy Dino - a fun browser game!"
  pageTitle="Games.albro | Flappy Dino"
>
  <main class="bg-green p-6 min-h-screen">
    <section>
      <h1 class="text-4xl md:text-6xl mb-8 dm-serif">Flappy Dino</h1>
      <Card>
        <div
          class="mb-4 p-4 rounded bg-green-900/60 border-l-4 border-green-400 text-white"
        >
          <h2 class="text-2xl mb-2 dm-serif">How to Play</h2>
          <ul class="list-disc ml-6 text-lg">
            <li>
              <strong>Controls:</strong> Press <kbd
                class="px-1 py-0.5 bg-black/30 rounded">Space</kbd
              > or <kbd class="px-1 py-0.5 bg-black/30 rounded">â†‘</kbd> (Up Arrow)
              or tap/click to jump.
            </li>
            <li>
              <strong>Objective:</strong> Avoid obstacles and get the highest score
              possible!
            </li>
          </ul>
        </div>
        <p class="mb-4 text-lg text-gray-200">
          Enjoy a round of Flappy Dino! This game is embedded from
          <Button
            href="https://flappy-dino.vercel.app/"
            class="text-green-400 underline"
          >
            flappy-dino.vercel.app
          </Button>.
        </p>
        <div class="responsive-iframe-wrapper" id="flappy-dino-wrapper">
          <iframe
            src="https://flappy-dino.vercel.app/"
            title="Flappy Dino Game"
            allowfullscreen
            scrolling="no"></iframe>
        </div>
        <button type="button" class="fullscreen-btn mt-2" id="fullscreen-btn"
          >Fullscreen</button
        >
      </Card>
    </section>
  </main>
</Layout>

<style>
  .responsive-iframe-wrapper {
    position: relative;
    width: 100%;
    max-width: 1280px;
    max-height: 720px;
    aspect-ratio: 16 / 9;
    background: #000;
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 4px 32px rgba(0, 0, 0, 0.3);
    border: 4px solid #4ade80;
    margin-left: auto;
    margin-right: auto;
  }

  .responsive-iframe-wrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
    display: block;
  }

  .fullscreen-btn {
    display: block;
    margin: 0.5rem auto 0 auto;
    padding: 0.5rem 1.5rem;
    background: #4ade80;
    color: #222;
    border: none;
    border-radius: 0.5rem;
    font-size: 1.1rem;
    font-family: inherit;
    cursor: pointer;
    transition: background 0.2s;
  }
  .fullscreen-btn:hover {
    background: #22c55e;
  }

  @media (max-width: 768px) {
    .responsive-iframe-wrapper {
      aspect-ratio: 9 / 16;
      min-height: 400px;
      max-width: 100vw;
      max-height: 90vh;
    }
  }

  .responsive-iframe-wrapper:fullscreen {
    width: 100vw !important;
    height: 100vh !important;
    max-width: none !important;
    max-height: none !important;
    aspect-ratio: unset !important;
    border-radius: 0;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const btn = document.getElementById('fullscreen-btn');
    const wrapper = document.getElementById('flappy-dino-wrapper');
    if (btn && wrapper) {
      btn.addEventListener('click', function () {
        if (wrapper.requestFullscreen) {
          wrapper.requestFullscreen();
        } else if ((wrapper as any).webkitRequestFullscreen) {
          (wrapper as any).webkitRequestFullscreen();
        } else if ((wrapper as any).msRequestFullscreen) {
          (wrapper as any).msRequestFullscreen();
        }
      });
    }
  });
</script>
